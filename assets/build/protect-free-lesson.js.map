{"version":3,"file":"protect-free-lesson.js","mappings":"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","sources":["webpack://jp/./assets/src/protect-free-lesson/index.css?dbf7","webpack://jp/./assets/src/utils/google-sheets.ts","webpack://jp/./node_modules/js-cookie/dist/js.cookie.mjs","webpack://jp/webpack/bootstrap","webpack://jp/webpack/runtime/define property getters","webpack://jp/webpack/runtime/hasOwnProperty shorthand","webpack://jp/webpack/runtime/make namespace object","webpack://jp/./assets/src/protect-free-lesson/index.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","const CONFIG = {\n    SHEET_ENDPOINT: 'https://script.google.com/macros/s/AKfycbwsFi5jd_JExJvGy9gf0CrC7emsQFfniRv_TvjBRig83fgs36IBsBIauY4Ak8h3zGGS/exec',\n};\nexport default function submitToSheet(data) {\n    console.log(data);\n    const form = document.createElement('form');\n    form.method = 'POST';\n    form.action = CONFIG.SHEET_ENDPOINT;\n    form.target = 'hidden_iframe' + Date.now();\n    form.style.display = 'none';\n    const firstName = document.createElement('input');\n    firstName.type = 'text';\n    firstName.name = 'first_name';\n    firstName.value = data.firstName;\n    const lastName = document.createElement('input');\n    lastName.type = 'text';\n    lastName.name = 'last_name';\n    lastName.value = data.lastName;\n    const email = document.createElement('input');\n    email.type = 'text';\n    email.name = 'email';\n    email.value = data.email;\n    const url = document.createElement('input');\n    url.type = 'text';\n    url.name = 'url';\n    url.value = data.url;\n    const title = document.createElement('input');\n    title.type = 'text';\n    title.name = 'title';\n    title.value = data.title;\n    form.appendChild(firstName);\n    form.appendChild(lastName);\n    form.appendChild(email);\n    form.appendChild(title);\n    form.appendChild(url);\n    form.style.display = 'none';\n    document.body.appendChild(form);\n    const iframe = document.createElement('iframe');\n    iframe.name = form.target;\n    // iframe.style.display = 'none';\n    iframe.src = 'about:blank';\n    document.body.appendChild(iframe);\n    form.submit();\n    iframe.onload = function () {\n        document.body.removeChild(form);\n        document.body.removeChild(iframe);\n    };\n}\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./index.css\";\nimport Cookie from \"js-cookie\";\nimport submitToSheet from \"../utils/google-sheets\";\n// RUNS THE WIDGET\ndocument.addEventListener(\"DOMContentLoaded\", init);\nconst COOKIE_NAME = \"signed_up_for_free_lessons\";\nfunction init() {\n    const modal = document.querySelector(\".free-lesson-signup__popup\");\n    if (Cookie.get(COOKIE_NAME) && modal) {\n        modal?.remove();\n    }\n    if (!modal)\n        return;\n    const form = modal?.querySelector(\"#free-lesson-signup__form\");\n    if (!form) {\n        console.log(\"no form\");\n        return;\n    }\n    form.addEventListener(\"submit\", function (e) {\n        e.preventDefault();\n        const formData = new FormData(form);\n        submitToSheet({\n            email: formData.get(\"email\")?.toString() ?? \"\",\n            firstName: formData.get(\"first_name\")?.toString() ?? \"\",\n            lastName: formData.get(\"last_name\")?.toString() ?? \"\",\n            url: window.location.href,\n            title: modal.querySelector(\"[data-title]\")?.getAttribute(\"data-title\") ?? \"\",\n        });\n        Cookie.set(COOKIE_NAME, \"true\", { expires: 365 });\n        modal?.remove();\n    });\n    modal.showModal();\n}\n"],"names":["CONFIG","SHEET_ENDPOINT","submitToSheet","data","console","log","form","document","createElement","method","action","target","Date","now","style","display","firstName","type","name","value","lastName","email","url","title","appendChild","body","iframe","src","submit","onload","removeChild","Cookie","addEventListener","init","COOKIE_NAME","modal","querySelector","get","remove","e","_formData$get$toStrin","_formData$get$toStrin2","_formData$get$toStrin3","_modal$querySelector$","preventDefault","formData","FormData","toString","window","location","href","getAttribute","set","expires","showModal"],"sourceRoot":""}