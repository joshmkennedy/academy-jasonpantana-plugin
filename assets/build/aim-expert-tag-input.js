(()=>{"use strict";const e=window.wp.element,t=window.ReactJSXRuntime;function n(n,r,o,i){const c=(0,e.createRoot)(n),a=i.map((e=>Object.entries(o).find((([t])=>t==e)))).reduce(((e,[t,n])=>({...e,[t]:n})),{});c.render((0,t.jsx)(s,{allTags:o,userTags:a,taxonomy:r}))}function s({allTags:n,userTags:s,taxonomy:r}){const o=(0,e.useRef)(null),i=(0,e.useRef)(null),[c,a]=(0,e.useState)(""),[u,l]=(0,e.useState)(!1),[d,f]=(0,e.useState)(n),[m,g]=(0,e.useState)(s),p=Object.values(d).filter((e=>e.toLowerCase().includes(c?.toLowerCase()))),[]=(0,e.useState)(s);function x(e,t){e&&t&&g({...m,[e]:t})}function j(e){let t=c;if(e&&(t=e),t){if(0===p.length){const e=Object.entries(d).find((([e,n])=>n==t));if(e)return x(e[0],e[1]),void a("");x(t,t)}else{const e=Object.entries(d).find((([e,n])=>n==t));if(e)return x(e[0],e[1]),void a("");const n=p[0],s=Object.entries(d).find((([e,t])=>t==n));if(!s)return;x(s[0],s[1])}a("")}}return(0,e.useEffect)((()=>{const e=o.current?.closest("#instructor-specialty-tags")?.querySelector(`[name="users-${r}-tags"]`);e&&(e.value=JSON.stringify(m))}),[m]),(0,e.useEffect)((()=>{if(!o.current)return;const e=e=>{o.current&&!o.current.contains(e.target)&&l(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[l]),(0,t.jsxs)("div",{ref:o,className:"expert-select-input",children:[(0,t.jsx)("h3",{children:r.replaceAll("-"," ")}),(0,t.jsxs)("div",{className:"combo",children:[(0,t.jsxs)("div",{className:"input__outer-wrapper",children:[(0,t.jsxs)("div",{className:"input__inner-wrapper",children:[Boolean(c.length)&&(0,t.jsx)("button",{type:"button",onClick:async function(){a(""),i.current?.focus(),await new Promise((e=>setTimeout(e,100))),l(!0)},children:"×"}),(0,t.jsx)("input",{ref:i,id:`users-${r}-tags--inserter`,value:null!=c?c:"",onChange:e=>a(e.target.value),onFocus:()=>l(!0),onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),j(),l(!1))}})]}),c&&(0,t.jsx)("button",{type:"button",className:"add-button",onClick:()=>j(),children:"Add"})]}),c.length>0&&(0,t.jsx)("div",{className:"components-form-token-field__suggestions-list",children:p.map((e=>(0,t.jsx)("li",{className:"components-form-token-field__suggestion",children:(0,t.jsx)("button",{type:"button",onClick:()=>{j(e)},children:e})},e)))})]}),(0,t.jsx)("div",{className:"user-tags",children:Object.entries(m).map((([e,n])=>(0,t.jsxs)("div",{className:"user-tag",children:[(0,t.jsx)("span",{children:n}),(0,t.jsx)("button",{type:"button",onClick:()=>function(e){delete m[e],g({...m})}(e),children:"×"})]},e)))})]})}document.addEventListener("DOMContentLoaded",(function(){var e;const t=document.querySelector('[data-mount="expert-in-tags-mount"]');if(!t)return;const s=window.AIMEXPERTINTAGS,r=JSON.parse(null!==(e=t.getAttribute("data-tags"))&&void 0!==e?e:"[]");n(t,"expert-in-tag",s,r)})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector('[data-mount="expert-with-tags-mount"]');if(!e)return;const t=window.AIMEXPERTWITHTAGS;console.log(t);const s=JSON.parse(e.getAttribute("data-tags")||"[]");n(e,"expert-with-tag",t,s)}))})();